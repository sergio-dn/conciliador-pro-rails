<div class="upload-section">
  <h2 class="section-title">
    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
      <polyline points="17 8 12 3 7 8"/>
      <line x1="12" y1="3" x2="12" y2="15"/>
    </svg>
    Cargar Archivos
  </h2>

  <div class="upload-grid">
    <!-- Bank Upload -->
    <div id="bank_upload" class="upload-card" data-controller="file-upload drag-drop" data-file-upload-type-value="bank">
      <div class="upload-dropzone" data-drag-drop-target="dropzone" data-action="dragover->drag-drop#dragover dragenter->drag-drop#dragenter dragleave->drag-drop#dragleave drop->drag-drop#drop">
        <div class="upload-icon bank">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <path d="M3 9h18"/>
            <path d="M9 21V9"/>
          </svg>
        </div>
        <h3>Extracto Bancario</h3>
        <p>Arrastra tu archivo aquí o haz clic para seleccionar</p>
        <p class="file-types">CSV, XLSX, XLS</p>

        <%= form_with url: upload_bank_reconciliations_path, method: :post, local: false, data: { file_upload_target: "form" } do |f| %>
          <%= f.file_field :file, accept: ".csv,.xlsx,.xls", class: "file-input", data: { file_upload_target: "input", action: "change->file-upload#upload" } %>
        <% end %>

        <button type="button" class="upload-btn" data-action="click->file-upload#triggerInput">
          Seleccionar Archivo
        </button>
      </div>
    </div>

    <!-- Sales Upload -->
    <div id="sales_upload" class="upload-card" data-controller="file-upload drag-drop" data-file-upload-type-value="sales">
      <div class="upload-dropzone" data-drag-drop-target="dropzone" data-action="dragover->drag-drop#dragover dragenter->drag-drop#dragenter dragleave->drag-drop#dragleave drop->drag-drop#drop">
        <div class="upload-icon sales">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
        </div>
        <h3>Registro de Ventas</h3>
        <p>Arrastra tu archivo aquí o haz clic para seleccionar</p>
        <p class="file-types">CSV, XLSX, XLS</p>

        <%= form_with url: upload_sales_reconciliations_path, method: :post, local: false, data: { file_upload_target: "form" } do |f| %>
          <%= f.file_field :file, accept: ".csv,.xlsx,.xls", class: "file-input", data: { file_upload_target: "input", action: "change->file-upload#upload" } %>
        <% end %>

        <button type="button" class="upload-btn" data-action="click->file-upload#triggerInput">
          Seleccionar Archivo
        </button>
      </div>
    </div>
  </div>

  <div id="reconcile_button">
    <%= render 'reconcile_button', bank_count: @bank_records&.size || 0, sales_count: @sales_records&.size || 0 %>
  </div>
</div>
